function initTOC(){var t=document.querySelector(".page-container"),e=document.querySelector(".post-page-container");const o=document.querySelector(".pc-post-toc"),c=document.querySelector(".tablet-post-toc");KEEP.utils.hasToc?(KEEP.utils.tocHelper={pcTocNavSections:[],tabletTocNavSections:[],getActiveIndex(e){if(Array.isArray(e)){let t=e.findIndex(t=>t&&0<t.getBoundingClientRect().top-20);return-1===t?t=e.length-1:0<t&&t--,t}},activeNav(){this.activateNavByIndex(o,this.getActiveIndex(this.pcTocNavSections)),this.activateNavByIndex(c,this.getActiveIndex(this.tabletTocNavSections))},registerTocNav(){var t=t=>[...t.querySelectorAll(".post-toc li a.nav-link")].map(t=>{var e=document.getElementById(decodeURI(t.getAttribute("href")).replace("#",""));return KEEP.utils.title2Top4HTag(t,e,500),e});this.pcTocNavSections=t(o),this.tabletTocNavSections=t(c)},activateNavByIndex(e,o){o=e.querySelectorAll(".post-toc li a.nav-link")[o];if(o&&!o.classList.contains("active-current")){e.querySelectorAll(".post-toc .active").forEach(t=>{t.classList.remove("active","active-current")}),o.classList.add("active","active-current");let t=o.parentNode;for(;!t.matches(".post-toc");)t.matches("li")&&t.classList.add("active"),t=t.parentNode;e=e.querySelector(".post-toc-wrap");window.anime({targets:e,duration:200,easing:"linear",scrollTop:e.scrollTop-e.offsetHeight/2+o.getBoundingClientRect().top-e.getBoundingClientRect().top})}},handleShowWhenHasToc(){var t=()=>{var t=KEEP.getStyleStatus(),e="isShowToc";t&&t.hasOwnProperty(e)?KEEP.utils.postHelper.hasToc(t[e]):KEEP.utils.postHelper.hasToc(!0)},e="init_open";!KEEP.theme_config.toc.hasOwnProperty(e)||KEEP.theme_config.toc[e]?t():KEEP.utils.postHelper.hasToc(!1)}},KEEP.utils.tocHelper.handleShowWhenHasToc(),KEEP.utils.tocHelper.registerTocNav()):(o&&e.removeChild(o),c&&t.removeChild(document.querySelector(".tablet-post-toc-mask")))}!0===KEEP.theme_config?.pjax?.enable&&KEEP.utils?initTOC():window.addEventListener("DOMContentLoaded",initTOC);